language: csharp
matrix:
  include:
    - os: linux
      mono: 3.12.0
      install:
        - sudo apt-get install mono-devel mono-gmcs
        - nuget restore src/chocolatey.sln
    - os: windows
      language: c  # "language: csharp" is not yet supported in Travis CI Windows
      env: PATH="/c/Program Files/Mono/bin:$PATH"
      solution: src/chocolatey.sln
      before_install:
        - choco install mono
    - os: windows
      language: c  # "language: csharp" is not yet supported in Travis CI Windows
      env: PATH="/c/Program Files/Mono/bin:$PATH"
      before_install:
        - choco install mono nuget.commandline
      install:
        - nuget restore src/chocolatey.sln
  allow_failures:
    - os: windows
before_script:
  - chmod +x build.sh
script:
  - ./build.sh -v
notifications:
  email:
    - chocolatey-build-status@googlegroups.com
  webhooks:
    urls:
      - https://webhooks.gitter.im/e/bd7909ec077be3f8873e
    on_success: change
    on_failure: always
    on_start: false
